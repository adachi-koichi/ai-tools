# 出力タイプ定義

Claude Codeで使用可能な4つの拡張タイプの詳細。

## Agent（エージェント）

**用途:** 専門的なサブエージェントの定義

**保存先:** `.claude/agents/<name>.md`

**特徴:**
- Taskツールから呼び出される専門エージェント
- 特定ドメイン（コードレビュー、テスト、デプロイ等）に特化
- 独立したコンテキストで動作

**適したケース:**
- 複雑で反復的な分析タスク
- 特定の専門知識が必要な作業
- 長時間実行されるバックグラウンドタスク

**ファイル形式:**
```markdown
---
name: agent-name
description: エージェントの説明
allowed-tools: Read, Grep, Glob
---

# エージェント名

## 目的
[このエージェントが解決する問題]

## ワークフロー
[実行ステップ]

## 出力形式
[期待される出力]
```

---

## Command（コマンド）

**用途:** スラッシュコマンドとして呼び出せるショートカット

**保存先:** `.claude/commands/<name>.md` または `.claude/commands/<group>/<name>.md`

**特徴:**
- `/command-name` で呼び出し可能
- 引数を受け取れる（`$ARGUMENTS`）
- 即座に実行される短いタスク向け

**適したケース:**
- よく使う操作のショートカット
- 定型的なワークフローの自動化
- プロジェクト固有のタスク

**ファイル形式:**
```markdown
---
description: コマンドの説明
allowed-tools: Read, Write, Edit, Bash
argument-hint: [arg1] [arg2]
---

# コマンド名

$ARGUMENTS を使って処理を実行

## ワークフロー
1. ステップ1
2. ステップ2
```

---

## Skill（スキル）

**用途:** ドメイン知識とツール統合を含む拡張機能パッケージ

**保存先:** `.claude/skills/<name>/SKILL.md`

**特徴:**
- 自動的にトリガーされる（descriptionに基づく）
- 関連ファイル（scripts/, references/, assets/）を含められる
- 複雑なドメイン知識を体系化

**適したケース:**
- 特定のAPI/サービスとの統合
- 複数ステップの複雑なワークフロー
- ドメイン固有の知識が必要な作業

**ディレクトリ構造:**
```
skills/<name>/
├── SKILL.md          # メインドキュメント（必須）
├── scripts/          # 実行スクリプト（オプション）
├── references/       # 参照ドキュメント（オプション）
└── assets/           # テンプレート等（オプション）
```

**SKILL.md形式:**
```markdown
---
name: skill-name
description: スキルの説明。いつ使用するかを含める。
---

# スキル名

## 概要
[スキルの目的]

## ワークフロー
[使用手順]

## 関連リソース
- [references/xxx.md](references/xxx.md)
```

---

## Rule（ルール）

**用途:** 行動規則、制約、好みの設定

**保存先:** `settings.json`の`rules`配列、または`CLAUDE.md`

**特徴:**
- 常に適用される制約
- シンプルな1行ルール
- プロジェクトまたはグローバルに設定可能

**適したケース:**
- コーディングスタイルの統一
- 言語設定（「日本語で応答」など）
- 禁止事項・必須事項

**設定方法:**

settings.jsonに追加:
```json
{
  "rules": [
    "コミットメッセージは日本語で記述する",
    "console.logは本番コードに残さない",
    "テストなしでリファクタリングしない"
  ]
}
```

CLAUDE.mdに追加:
```markdown
## ルール
- すべての公開関数にJSDocコメントを付ける
- エラーハンドリングは明示的に行う
```

---

## タイプ選択ガイド

| 検出パターン | 推奨タイプ |
|-------------|-----------|
| 単発の操作を繰り返し実行 | command |
| 複雑な分析・調査タスク | agent |
| ドメイン知識が必要な作業 | skill |
| 「〜して」「〜しないで」の指示 | rule |
| API連携やツール統合 | skill |
| Git操作のショートカット | command |
| コードスタイルの好み | rule |
| 特定ファイル形式の処理 | skill |
